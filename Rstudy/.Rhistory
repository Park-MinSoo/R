remDr$executeScript("scrollBy(0, 3200)", args = list(webElem))
Sys.sleep(1)
remDr$executeScript("scrollBy(0, 3200)", args = list(webElem))
Sys.sleep(3)
repl_v = NULL
endFlag <- FALSE
page <- 3
repeat {
for(index in 3:7) { # 댓글의 더보기 버튼에 클릭이벤트를 전부 보내는것이다.
fullContentLinkCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.crop > a", sep='')
fullContentLink<-remDr$findElements(using='css selector',  fullContentLinkCSS)
if (length(fullContentLink) == 0) {
cat("종료\n")
endFlag <- TRUE
break
}
repeat {
for(index in 3:7) { # 댓글의 더보기 버튼에 클릭이벤트를 전부 보내는것이다.
fullContentLinkCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.crop > a", sep='')
fullContentLink<-remDr$findElements(using='css selector',  fullContentLinkCSS)
if (length(fullContentLink) == 0) {
cat("종료\n")
endFlag <- TRUE
break
}
remDr$executeScript("arguments[0].click();",fullContentLink);
Sys.sleep(1)
fullContentCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.origin > div.review_cont > p", sep='')
fullContent<-remDr$findElements(using='css selector', fullContentCSS)
print(fullContent)
repl <-sapply(fullContent,function(x){x$getElementText()})
print(repl)
repl_v <- c(repl_v, unlist(repl))
}
if(endFlag)
break;
if(page == 10){
page <- 3
nextPageCSS <- "#infoset_reviewContentList > div.review_sort.sortTop > div.review_sortLft > div > a.bgYUI.next"
}
else{
page <- page+1;
nextPageCSS <- paste("#infoset_reviewContentList > div.review_sort.sortBot > div.review_sortLft > div > a:nth-child(",page,")",sep="")
}
#infoset_reviewContentList > div.review_sort.sortBot > div.review_sortLft > div > a:nth-child(4)
#infoset_reviewContentList > div.review_sort.sortBot > div.review_sortLft > div > a:nth-child(5)
remDr$executeScript("scrollTo(0, 0)", args = list(webElem))
nextPageLink<-remDr$findElements(using='css selector',nextPageCSS)
remDr$executeScript("arguments[0].click();",nextPageLink);
#sapply(nextPageLink,function(x){x$clickElement()})
Sys.sleep(5)
print(page)
}
for(index in 3:7) { # 댓글의 더보기 버튼에 클릭이벤트를 전부 보내는것이다.
fullContentLinkCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.crop > a", sep='')
fullContentLink<-remDr$findElements(using='css selector',  fullContentLinkCSS)
if (length(fullContentLink) == 0) {
cat("종료\n")
endFlag <- TRUE
break
}
remDr$executeScript("arguments[0].click();",fullContentLink);
Sys.sleep(1)
fullContentCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.origin > div.review_cont > p", sep='')
fullContent<-remDr$findElements(using='css selector', fullContentCSS)
print(fullContent)
repl <-sapply(fullContent,function(x){x$getElementText()})
print(repl)
repl_v <- c(repl_v, unlist(repl))
}
remDr <- remoteDriver(remoteServerAddr = "localhost", port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://www.yes24.com/24/goods/40936880")
webElem <- remDr$findElement("css", "body")
remDr$executeScript("scrollTo(0, 0)", args = list(webElem))
Sys.sleep(1)
remDr$executeScript("scrollBy(0, 3200)", args = list(webElem))
Sys.sleep(1)
remDr$executeScript("scrollBy(0, 3200)", args = list(webElem))
remDr$open()
repl_v = NULL
endFlag <- FALSE
remDr <- remoteDriver(remoteServerAddr = "localhost", port = 4445, browserName = "chrome")
remDr$open()
remDr$open()
remDr$open()
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost", port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://www.yes24.com/24/goods/40936880")
webElem <- remDr$findElement("css", "body")
remDr$executeScript("scrollTo(0, 0)", args = list(webElem))
Sys.sleep(1)
remDr$executeScript("scrollBy(0, 3200)", args = list(webElem))
Sys.sleep(1)
remDr$executeScript("scrollBy(0, 3200)", args = list(webElem))
Sys.sleep(1)
remDr$executeScript("scrollBy(0, 3200)", args = list(webElem))
Sys.sleep(3)
repl_v = NULL
endFlag <- FALSE
page <- 3
repeat {
for(index in 3:7) { # 댓글의 더보기 버튼에 클릭이벤트를 전부 보내는것이다.
fullContentLinkCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.crop > a", sep='')
fullContentLink<-remDr$findElements(using='css selector',  fullContentLinkCSS)
if (length(fullContentLink) == 0) {
cat("종료\n")
endFlag <- TRUE
break
}
remDr$executeScript("arguments[0].click();",fullContentLink);
Sys.sleep(1)
fullContentCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.origin > div.review_cont > p", sep='')
fullContent<-remDr$findElements(using='css selector', fullContentCSS)
print(fullContent)
repl <-sapply(fullContent,function(x){x$getElementText()})
print(repl)
repl_v <- c(repl_v, unlist(repl))
}
if(endFlag)
break;
if(page == 10){
page <- 3
nextPageCSS <- "#infoset_reviewContentList > div.review_sort.sortTop > div.review_sortLft > div > a.bgYUI.next"
}
else{
page <- page+1;
nextPageCSS <- paste("#infoset_reviewContentList > div.review_sort.sortBot > div.review_sortLft > div > a:nth-child(",page,")",sep="")
}
#infoset_reviewContentList > div.review_sort.sortBot > div.review_sortLft > div > a:nth-child(4)
#infoset_reviewContentList > div.review_sort.sortBot > div.review_sortLft > div > a:nth-child(5)
remDr$executeScript("scrollTo(0, 0)", args = list(webElem))
nextPageLink<-remDr$findElements(using='css selector',nextPageCSS)
remDr$executeScript("arguments[0].click();",nextPageLink);
#sapply(nextPageLink,function(x){x$clickElement()})
Sys.sleep(5)
print(page)
}
remDr$open()
remDr$navigate("https://www.istarbucks.co.kr/store/store_map.do?disp=locale")
pageLink <- remDr$findElements(using='css',"#container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step1 > div.loca_step1_cont > ul > li:nth-child(1) > a")
remDr$executeScript("arguments[0].click();",pageLink)
pageLink <- remDr$findElements(using='css',"#mCSB_2_container > ul > li:nth-child(1) > a")
remDr$executeScript("arguments[0].click();",pageLink)
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
Sys.sleep(1)
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
reple
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
Sys.sleep(1)
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
cat(length(reple), "\n")
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
repeat {
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
}
repeat {
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
}
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li > strong")
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple_v
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
repeat {
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
}
repeat {
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(",i,") > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
}
#주소 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
repeat {
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(",i,") > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
}
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li > strong")
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
#주소 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
#주소 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
reple_v <- sapply(doms, function (x) {x$getElementText()})
reple_v <- strsplit(unlist(reple_v), split="\n")
print(reple_v)
reple <- append(reple, unlist(reple_v))
cat(length(reple), "\n")
reple
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
#주소 & 전화번호 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
reple_v <- sapply(doms, function (x) {x$getElementText()})
reple_v <- strsplit(unlist(reple_v), split="\n")
print(reple_v)
reple <- append(reple, unlist(reple_v))
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
reple
#주소 & 전화번호 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
reple_v <- sapply(doms, function (x) {x$getElementText()})
reple_v <- strsplit(unlist(reple_v), split="\n")
print(reple_v)
print(reple_v)
reple
reple <- append(reple, unlist(reple_v))
reple
cat(length(reple), "\n")
print(reple_v)
print(reple)
pageLink <- NULL
reple <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
reple_v <- sapply(doms, function (x) {x$getElementText()})
print(reple_v)
reple <- append(reple, unlist(reple_v))
#주소 & 전화번호 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
reple_v <- sapply(doms, function (x) {x$getElementText()})
reple_v <- strsplit(unlist(reple_v), split="\n")
print(reple_v)
reple <- append(reple, unlist(reple_v))
print(reple)
cat(length(reple), "\n")
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
store_v <- sapply(doms, function (x) {x$getElementText()})
print(store_v)
store <- append(store, unlist(store_v))
store <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
store_v <- sapply(doms, function (x) {x$getElementText()})
print(store_v)
store <- append(store, unlist(store_v))
lat <- getElementValueOfCssProperty(data-lat)
lng <- getElementValueOfCssProperty(data-long)
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
doms
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1)")
doms
?remDr$findElements
?findElements
?findElements
doms <- remDr$findElements(using = "css", "data-lat[#mCSB_3_container > ul > li:nth-child(1)]")
doms <- remDr$findElements(using = "css", "data-lat[li = #mCSB_3_container > ul > li:nth-child(1)]")
store_v <- sapply(doms, function (x) {x$getElementText()})
print(store_v)
pageLink <- NULL
store <- NULL
pageLink <- NULL
store <- NULL
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1)")
lat <- doms$getElementValueOfCssProperty(data-lat)
store_v <- sapply(doms, function (x) {x$getElementText()})
lat <- store_v$getElementValueOfCssProperty(data-lat)
pageLink <- NULL
store <- NULL
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
store_v <- sapply(doms, function (x) {x$getElementText()})
print(store_v)
store <- append(store, unlist(store_v))
#주소 & 전화번호 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
store_v <- sapply(doms, function (x) {x$getElementText()})
store_v <- strsplit(unlist(store_v), split="\n")
print(store_v)
store <- append(store, unlist(store_v))
print(store)
cat(length(store), "\n")
cat(length(store), "개의 매장 추출\n")
write.csv(store, "starbucks.csv")
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
store_v <- sapply(doms, function (x) {x$getElementText()})
print(store_v)
store <- append(store, unlist(store_v))
#주소 & 전화번호 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
store_v <- sapply(doms, function (x) {x$getElementText()})
store_v <- strsplit(unlist(store_v), split="\n")
print(store_v)
store <- append(store, unlist(store_v))
print(store)
cat(length(store), "\n")
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
store_v <- sapply(doms, function (x) {x$getElementText()})
print(store_v)
store <- append(store, unlist(store_v))
#주소 & 전화번호 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
store_v <- sapply(doms, function (x) {x$getElementText()})
store_v <- strsplit(unlist(store_v), split="\n")
print(store_v)
store <- append(store, unlist(store_v))
print(store)
cat(length(store), "\n")
cat(length(store), "개의 매장 추출\n")
write.csv(store, "starbucks.csv")
# 전체 매장 갯수 추출 코드
sizeCss <- "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"
size <- remDr$findElements(using = 'css selector', sizeCss)
limit <- sapply(size, function(x){x$getElementText()})
if(index %% 3 == 0 && index != limit)
remDr$executeScript(
"var dom=document.querySelectorAll('#mCSB_3_container > ul > li')[arguments[0]];
dom.scrollIntoView();",list(index))
size
# 전체 매장 갯수 추출 코드
sizeCss <- "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"
size <- remDr$findElements(using = 'css selector', sizeCss)
limit <- sapply(size, function(x){x$getElementText()})
limit
store_v
# 전체 매장 갯수 추출 코드
sizeCss <- "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"
size <- remDr$findElements(using = 'css selector', sizeCss)
limit <- sapply(size, function(x){x$getElementText()})
limit
# 전체 매장 갯수 추출 코드
sizeCss <- "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"
sizeCss
size <- remDr$findElements(using = 'css selector', sizeCss)
size
index
index <- index + 1
index
index <- index + 1
index
# 전체 매장 갯수 추출 코드
size <- remDr$findElements(using = 'css', "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span")
limit <- sapply(size, function(x){x$getElementText()})
limit
# 전체 매장 갯수 추출 코드
size <- remDr$findElements(using = 'css', "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span")
limit <- sapply(size, function(x){x$getElementText()})
# 전체 매장 갯수 추출 코드
limit <- NULL
sizeCss <- "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"
size <- remDr$findElements(using = 'css', sizeCss)
limit <- sapply(size, function(x){x$getElementText()})
limit
unlist(limit)
sizeCss <- "container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"
size <- remDr$findElements(using = 'css', sizeCss)
limit <- sapply(size, function(x){x$getElementText()})
unlist(limit)
sizeCss <- "#container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"
size <- remDr$findElements(using = 'css', sizeCss)
limit <- sapply(size, function(x){x$getElementText()})
limit
unlist(limit)
if(index %% 3 == 0 && index != limit)
remDr$executeScript(
"var dom=document.querySelectorAll('#mCSB_3_container > ul > li')[arguments[0]];
dom.scrollIntoView();",list(index))
if(index %% 3 == 0 && index != limit)
limit/3
print(limit/3)
limit
unlist(limit)/3
numeric.unlist(limit)/3
numeric.limit/3
totalStore <- unlist(limit)
totalStore
as.numeric(totalStore)
ts <- as.numeric(totalStore)
ts
for(i in 1:ts/3{
#매장명 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > strong")
store_v <- sapply(doms, function (x) {x$getElementText()})
print(store_v)
store <- append(store, unlist(store_v))
#위도 추출(lat)
#경도 추출(long)
#  doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1)")
#  store_v <- sapply(doms, function (x) {x$getElementText()})
#  lat <- doms$getElementValueOfCssProperty(data-lat)
#  lng <- getElementValueOfCssProperty(data-long)
#주소 & 전화번호 추출
doms <- remDr$findElements(using = "css", "#mCSB_3_container > ul > li:nth-child(1) > p")
Sys.sleep(1)
store_v <- sapply(doms, function (x) {x$getElementText()})
store_v <- strsplit(unlist(store_v), split="\n")
print(store_v)
store <- append(store, unlist(store_v))
print(store)
cat(length(store), "\n")
}
# 3개의 매장 정보를 읽고 세번째 매장 DOM 객체 위에서 스크롤 이벤트 발생
# 마지막 매장에 도달한 경우에는 더 이상 스크롤이벤트 발생 불필요
if(index %% 3 == 0 && index != limit)
remDr$executeScript(
"var dom=document.querySelectorAll('#mCSB_3_container > ul > li')[arguments[0]];
dom.scrollIntoView();",list(index))
index <- index + 1
}
write.csv(store, "starbucks.csv")
511/3
ts/3
1:ts/3
ts/3
ts%%3
ts%3
ts%/%3
ts%/%3
ts%/%3
1:ts%/%3
#매장명 추출
cssAdd <- paste("#mCSB_3_container > ul > li:nth-child(",i,") > strong", sep="")
